<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ name }} League Stats</title>
        <link rel="stylesheet" type= "text/css" href="{{ url_for('static', filename='styles/home.css') }}">
        <link rel="stylesheet" type= "text/css" href="{{ url_for('static', filename='styles/home_content.css') }}">
        <script>
            function updateFormAction() {
                var seasonSelect = document.getElementById('season');
                var form = document.getElementById('seasonSelect');
                form.action = '/season/' + seasonSelect.value;
                form.submit();
            }
        </script>
    </head>
    <body>
        <div class="content-container">
            <div class="content">
                <div class="league-info">
                    <h1>League {{ name }}</h1>
                    <div class="league-subinfo">
                        <form id="seasonSelect" method="get" onsubmit="updateFormAction(); return false;">
                            <select id="season" name="season" onchange="updateFormAction()">
                                {% for season in seasons %}
                                    {% set index = loop.index %}
                                    <option value="{{ season }}" {% if season == selected_season %}selected{% endif %}>
                                        Season {{ index }} ({{ season }})
                                    </option>
                                {% endfor %}
                            </select>
                        </form>                        
                        <h2>{{ team_count }} teams</h2>
                        <h2>
                            Previous Champion: 
                            {% if previous_winner %}
                                {{ previous_winner[0] }} ({{ previous_winner[1][0] }}-{{ previous_winner[1][2] }}-{{ previous_winner[1][1] }})
                            {% else %}
                                N/A
                            {% endif %}
                        </h2>
                    </div>
                </div>
                <hr>
                <div class="power-rankings-container">
                    <h1>Power Rankings (Week {{ current_week }})</h1>
                    <div class="power-rankings">
                        {% for team in power_rankings %}
                            {% set index = loop.index %}
                            {% if index == 1 %}
                                <h2 class="pr-1">{{team[1].team_name}} ({{team[0]}})</h1>
                            {% elif index == 2 %}
                                <h3 class="pr-2">{{team[1].team_name}} ({{team[0]}})</h2>
                            {% elif index == 3 %}
                                <h4 class="pr-3">{{team[1].team_name}} ({{team[0]}})</h3>
                            {% else %}
                                <h5 class="pr-4">{{index}}. {{team[1].team_name}} ({{team[0]}})</h4>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                <hr>
                <div class="stat-boxes-container">
                    {% block wins %}
                        <div class="stat-box">
                            {% with stat="Most wins", desc="Total games won", lb=stats[0], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block losses %}
                        <div class="stat-box">
                            {% with stat="Most Losses", desc="Total games lost", lb=stats[1], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block pointsfor %}
                        <div class="stat-box">
                            {% with stat="Most points for", desc="Total points scored by active players in games", lb=stats[2], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block pointsagainst %}
                        <div class="stat-box">
                            {% with stat="Most points against", desc="Total points scored by opponent's active players in games", lb=stats[3], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block totalpoints %}
                        <div class="stat-box">
                            {% with stat="Most total points", desc="Total points scored by active and inactive players in games", lb=stats[4], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block avgpoints %}
                        <div class="stat-box">
                            {% with stat="Highest average points", desc="Average points scored by active players in games", lb=stats[5], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block trades %}
                        <div class="stat-box">
                            {% with stat="Most trades", desc="Total accepted trades", lb=stats[10], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block benchedpoints %}
                        <div class="stat-box">
                            {% with stat="Most benched points", desc="Most points scored by inactive players", lb=stats[11], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                    {% block pickups %}
                        <div class="stat-box">
                            {% with stat="Most waiver pickups", desc="Most players picked up off waivers", lb=stats[12], owners=owners %}
                                {% include "_stat_box.html" %}
                            {% endwith %}
                        </div>
                    {% endblock %}
                </div>
            </div>
        </div>
    </body>
</html>
